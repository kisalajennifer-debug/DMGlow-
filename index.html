<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DMGlow Social Reply Engine</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

<div class="app">
  <h1>DMGlow Social Reply Engine</h1>

  <textarea id="userInput" placeholder="Paste the message you received or record voice..."></textarea>

  <div class="controls">
    <select id="tone">
      <option value="chill">Chill</option>
      <option value="playful">Playful</option>
      <option value="confident">Confident</option>
      <option value="witty">Witty</option>
      <option value="mysterious">Mysterious</option>
    </select>

    <button id="recordBtn" class="generate-btn">üé§ Record Voice</button>
  </div>

  <button class="generate-btn" onclick="generateReply()">
    Generate Replies
  </button>

  <div class="results" id="outputArea"></div>

</div>

<script>

// ================= SMART GENERATOR =================
let selectedText = "";

function generateReply() {
  const mood = document.getElementById("tone").value;
  const outputArea = document.getElementById("outputArea");
  const inputText = document.getElementById("userInput").value.trim();

  if (!inputText) {
    alert("Please enter or record a message first.");
    return;
  }

  const variations = {
    chill: [
      `Hmm... "${inputText}"? I like that energy.`,
      `That‚Äôs interesting üëÄ Tell me more about "${inputText}".`,
      `"${inputText}" sounds like there‚Äôs a story there.`,
      `Okay okay‚Ä¶ I wasn‚Äôt expecting that one.`,
      `Now you‚Äôve got my attention.`
    ],
    playful: [
      `"${inputText}"? Oh we‚Äôre being bold today üòå`,
      `Should I be impressed or concerned?`,
      `Look at you starting something.`,
      `You really typed that with confidence huh?`,
      `Dangerous energy detected üòÇ`
    ],
    confident: [
      `"${inputText}" ‚Äî I respect direct energy.`,
      `I don‚Äôt entertain everything‚Ä¶ but this? Not bad.`,
      `Confidence suits you.`,
      `You knew exactly what you were doing there.`,
      `I see intention behind that.`
    ],
    witty: [
      `"${inputText}" just unlocked a plot twist.`,
      `Main character moment right there.`,
      `That line deserves a sequel.`,
      `Unexpected‚Ä¶ but entertaining.`,
      `You might be onto something clever.`
    ],
    mysterious: [
      `"${inputText}"‚Ä¶ intriguing.`,
      `You don‚Äôt say things like that casually.`,
      `Continue. I‚Äôm listening.`,
      `There‚Äôs depth behind that message.`,
      `Noted. Very noted.`
    ]
  };

  outputArea.innerHTML = "";
  selectedText = "";

  const shuffled = variations[mood].sort(() => 0.5 - Math.random());

  shuffled.slice(0, 3).forEach(reply => {
    const box = document.createElement("div");
    box.className = "reply-box";
    box.textContent = reply;

    box.onclick = function() {
      selectedText = reply;
      document.querySelectorAll(".reply-box")
        .forEach(b => b.style.border = "1px solid #C9A227");
      box.style.border = "2px solid white";
    };

    outputArea.appendChild(box);
  });
}


// ================= SPEECH TO TEXT =================
const recordBtn = document.getElementById("recordBtn");
const userInput = document.getElementById("userInput");

let recognition;
let isRecording = false;

// Check browser support
if ('webkitSpeechRecognition' in window) {
  recognition = new webkitSpeechRecognition();
  recognition.continuous = false;
  recognition.interimResults = false;
  recognition.lang = "en-US";

  recognition.onresult = function(event) {
    const transcript = event.results[0][0].transcript;
    userInput.value = transcript;
  };

  recognition.onend = function() {
    recordBtn.textContent = "üé§ Record Voice";
    isRecording = false;
  };

} else {
  alert("Speech recognition not supported in this browser. Use Chrome.");
}

recordBtn.addEventListener("click", function() {
  if (!recognition) return;

  if (!isRecording) {
    recognition.start();
    recordBtn.textContent = "‚èπ Listening...";
    isRecording = true;
  } else {
    recognition.stop();
    recordBtn.textContent = "üé§ Record Voice";
    isRecording = false;
  }
});

</script>

</body>
</html>
